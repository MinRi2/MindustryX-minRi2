From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Anuken <arnukren@gmail.com>
Date: Thu, 7 Aug 2025 21:12:56 +0200
Subject: [PATCH] Server crash fix

---
 core/src/mindustry/game/MapObjectives.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustry/game/MapObjectives.java b/core/src/mindustry/game/MapObjectives.java
index c91bdd2d8e9673e049ad025ead9207a30d25d3d9..024c7bdb2f10d3b3c6d93701533cc4a41a3b9752 100644
--- a/core/src/mindustry/game/MapObjectives.java
+++ b/core/src/mindustry/game/MapObjectives.java
@@ -1196,7 +1196,7 @@ public class MapObjectives implements Iterable<MapObjective>, Eachable<MapObject
         public @Vertices float[] vertices = new float[24];
         private boolean mapRegion = true;
 
-        private transient TextureRegion fetchedRegion;
+        private transient @Nullable TextureRegion fetchedRegion;
 
         public QuadMarker(){
             for(int i = 0; i < 4; i++){
@@ -1287,6 +1287,8 @@ public class MapObjectives implements Iterable<MapObjective>, Eachable<MapObject
         }
 
         private void setUv(int i, double u, double v){
+            if(headless) return;
+
             if(i >= 0 && i < 4){
                 if(fetchedRegion == null) setTexture(textureName);
 
