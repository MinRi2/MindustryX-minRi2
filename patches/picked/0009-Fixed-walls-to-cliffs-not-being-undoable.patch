From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Anuken <arnukren@gmail.com>
Date: Sun, 27 Jul 2025 17:04:04 -0400
Subject: [PATCH] Fixed 'walls to cliffs' not being undoable

---
 core/src/mindustry/editor/MapEditor.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/core/src/mindustry/editor/MapEditor.java b/core/src/mindustry/editor/MapEditor.java
index 45b37c271a68e1218193b72330f1738215d734b3..14dfb89665f89654253ae97b2e70400716a30f11 100644
--- a/core/src/mindustry/editor/MapEditor.java
+++ b/core/src/mindustry/editor/MapEditor.java
@@ -157,7 +157,7 @@ public class MapEditor{
                 if(!tester.get(tile)) return;
                 boolean changed = false;
 
-                if(drawBlock.saveData){
+                if(drawBlock.saveData || tile.shouldSaveData()){
                     addTileOp(TileOp.get(tile.x, tile.y, DrawOperation.opData, TileOpData.get(tile.data, tile.floorData, tile.overlayData)));
                     addTileOp(TileOp.get(tile.x, tile.y, DrawOperation.opDataExtra, tile.extraData));
                 }
@@ -248,6 +248,7 @@ public class MapEditor{
                 tile.setBlock(Blocks.air);
             }
         }
+        editor.flushOp();
     }
 
     public void addFloorCliffs(){
