From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: way-zer <himc.wicp@gmail.com>
Date: Wed, 3 Apr 2024 21:57:24 +0800
Subject: [PATCH] API: Hooks

---
 core/src/mindustry/ClientLauncher.java          | 1 +
 core/src/mindustry/Vars.java                    | 1 +
 server/src/mindustry/server/ServerLauncher.java | 1 +
 3 files changed, 3 insertions(+)

diff --git a/core/src/mindustry/ClientLauncher.java b/core/src/mindustry/ClientLauncher.java
index c68681b7a9d6caf8e0ed8dace53b839efbf34eb5..1b5a25a7cbbd00c5a8e463ec722fb3b3ac5da9d6 100644
--- a/core/src/mindustry/ClientLauncher.java
+++ b/core/src/mindustry/ClientLauncher.java
@@ -173,6 +173,7 @@ public abstract class ClientLauncher extends ApplicationCore implements Platform
         add(ui = new UI());
         add(netServer = new NetServer());
         add(netClient = new NetClient());
+        add(new mindustryX.Hooks());
 
         assets.load(schematics);
 
diff --git a/core/src/mindustry/Vars.java b/core/src/mindustry/Vars.java
index d7756c3df025ba0e76882f656501d7d560c87114..d6b74b8a99a5ae12248f4dead618a374ea77ec12 100644
--- a/core/src/mindustry/Vars.java
+++ b/core/src/mindustry/Vars.java
@@ -269,6 +269,7 @@ public class Vars implements Loadable{
     }
 
     public static void init(){
+        mindustryX.Hooks.beforeInit();
         Groups.init();
 
         if(loadLocales){
diff --git a/server/src/mindustry/server/ServerLauncher.java b/server/src/mindustry/server/ServerLauncher.java
index 1aea11b2cc877ef9a35280575e6419d9fab16f01..1799c999b2affdc0de392841212edc1f544e4751 100644
--- a/server/src/mindustry/server/ServerLauncher.java
+++ b/server/src/mindustry/server/ServerLauncher.java
@@ -76,6 +76,7 @@ public class ServerLauncher implements ApplicationListener{
         Core.app.addListener(netServer = new NetServer());
         Core.app.addListener(new ServerControl(args));
         Core.app.addListener(new ApplicationListener(){public void update(){ asyncCore.end(); }});
+        Core.app.addListener(new mindustryX.Hooks());
 
         mods.eachClass(Mod::init);
 
